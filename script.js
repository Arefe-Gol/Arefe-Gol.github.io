// var pieData1 = [
//     { "category": "Architectural Design", "value": 40, "description": "Architectural Expression I\nArchitectural Expression II\nArchitectural Design I: Shopping Mall\nArchitectural Design II: Family House\nArchitectural Design III: Art Mausam\nArchitectural Design IV: Children Hospital\nArchitectural Design V: Climate-Friendly Residential Complex\nRural Architecture I\nRural Architecture II\nAnalysis of Urban Spaces\nFinal Design: Family Book Garden\nApplication of computer in Architecture (Auto Cad)\nIntroduction to the World Architecture\nIntroduction to Contemporary Architecture" },
//     { "category": "Building Technology & Materials", "value": 25, "description": "Building Materials\nTechnical Design\nConcrete Structures\nBuilding Statics\nStrength of Materials and Steel Structures\nElectrical Installation (Illumination and Acoustics)\nIntroduction to Building Restoration" },
//     { "category": "Visual Arts Essentials", "value": 20, "description": "Applied Geometry\nPerspective Geometry\nMathematics and statistics\nFundamentals of Visual Arts\nBasics of Architectural Design I\nBasics of Architectural Design II\nHuman, Nature, and Architecture\nFundamentals of Anatomical Planning" },
// ];

// var pieData2 = [
//     { "category": "Project Management", "value": 50, "description": "Project Management Standards (PMBOK, PRINCE2, PMDC, and OPM3)\nSelected topics in contemporary project Management \nProject Financial Management (Budget and Feasibility Analysis) \nRisk Management (Risk Identification, Analysis, and Mitigation)\nProject Planning and Control (WBS, Gantt Chart, Monitoring, and MS Project)\nFinal Thesis: A Guideline on Utilizing Project Teamsâ€™ Tacit Knowledge for Employing Agile Practices in a construction project." },
//     { "category": "Organizational Management", "value": 25, "description": "Human Resource Management\nOrganizational Management of Consultant Offices\nOperation Research and Quantitative Methods in Management\nMulti Criteria Decision Analysis Methods (TOPSIS, Vikor, Electre, AHP, etc.)" },
//     { "category": "Construction Management", "value": 15, "description": "Quantity Surveying and Estimating\nSite Management and Organization\nBuilding Site Report I\nBuilding Site Report II\nMaterial Management\nAdvanced Construction Site Management" },
//     { "category": "Contracts & Legal", "value": 10, "description": "Legal Issues and Contracts in Construction\nSuccessful strategies for Negotiation" }
// ];

// var pieData3 = [
//     { "category": "Green Building & Energy Modeling", "value": 45, "description": "Revit-BIM\nBuilding Energy Systems Design\nWhole Building Energy Modelling and Simulation\nCapstone: Greening Existing Budlings\nCapstone: New Building Energy System Design" },
//     { "category": "Leadership & Management", "value": 20, "description": "Organizational Leadership\nSustainability and Leadership\nAnalytics and Interpretation for Applied Science" },
//     { "category": "Business & Brand Marketing", "value": 20, "description": "Brands with Purpose\nBusiness Acumen for Technical Leaders\nBusiness Ethics Leadership" },
//     { "category": "Sustainable Developement", "value": 15, "description": "Regenerative Development\nGreen Building Contemporary Practice" },
// ];

// var radarData1 = [
//     {
//         "category": "Project Management",
//         "value": 20,
//     }, {
//         "category": "Architectural Design",
//         "value": 80,
//     }, {
//         "category": "Building Technology & Materials",
//         "value": 40,
//     }, {
//         "category": "Visual Arts Essentials",
//         "value": 40,
//     }, {
//         "category": "Organizational Management",
//         "value": 0,
//     }, {
//         "category": "Construction Management",
//         "value": 15,
//     }, {
//         "category": "Contracts & Legal",
//         "value": 0,
//     }, {
//         "category": "Green Building & Energy Modeling",
//         "value": 15,
//     }, {
//         "category": "Leadership & Business",
//         "value": 0,
//     }, {
//         "category": "Business & Brand Marketing",
//         "value": 0,
//     }, {
//         "category": "Data Analysis & Visualization",
//         "value": 0
//     }
// ];

// var radarData2 = [
//     {
//         "category": "Project Management",
//         "value": 90,
//     }, {
//         "category": "Architectural Design",
//         "value": 0,
//     }, {
//         "category": "Building Technology & Materials",
//         "value": 20,
//     }, {
//         "category": "Visual Arts Essentials",
//         "value": 0,
//     }, {
//         "category": "Organizational Management",
//         "value": 70,
//     }, {
//         "category": "Construction Management",
//         "value": 25,
//     }, {
//         "category": "Contracts & Legal",
//         "value": 20,
//     }, {
//         "category": "Green Building & Energy Modeling",
//         "value": 20,
//     }, {
//         "category": "Leadership & Business",
//         "value": 35,
//     }, {
//         "category": "Business & Brand Marketing",
//         "value": 10,
//     }, {
//         "category": "Data Analysis & Visualization",
//         "value": 0

//     }
// ];

// var radarData3 = [
//     {
//         "category": "Project Management",
//         "value": 25,
//     }, {
//         "category": "Architectural Design",
//         "value": 30,
//     }, {
//         "category": "Building Technology & Materials",
//         "value": 40,
//     }, {
//         "category": "Visual Arts Essentials",
//         "value": 0,
//     }, {
//         "category": "Organizational Management",
//         "value": 50,
//     }, {
//         "category": "Construction Management",
//         "value": 25,
//     }, {
//         "category": "Contracts & Legal",
//         "value": 30,
//     }, {
//         "category": "Green Building & Energy Modeling",
//         "value": 60,
//     }, {
//         "category": "Leadership & Business",
//         "value": 60,
//     }, {
//         "category": "Business & Brand Marketing",
//         "value": 40,
//     }, {
//         "category": "Data Analysis & Visualization",
//         "value": 20
//     }
// ];

// var radarCategories = [
//     { "category": "Project Management", "description": "Project Management Standards (PMBOK, PRINCE2, PMDC, and OPM3)\nSelected topics in contemporary project Management \nProject Financial Management (Budget and Feasibility Analysis) \nRisk Management (Risk Identification, Analysis, and Mitigation)\nProject Planning and Control (WBS, Gantt Chart, Monitoring, and MS Project)\nFinal Thesis: A Guideline on Utilizing Project Teams' Tacit Knowledge for Employing Agile Practices in a construction project." },
//     { "category": "Architectural Design", "description": "Architectural Expression I\nArchitectural Expression II\nArchitectural Design I: Shopping Mall\nArchitectural Design II: Family House\nArchitectural Design III: Art Mausam\nArchitectural Design IV: Children Hospital\nArchitectural Design V: Climate-Friendly Residential Complex\nRural Architecture I\nRural Architecture II\nAnalysis of Urban Spaces\nFinal Design: Family Book Garden\nApplication of computer in Architecture\nIntroduction to the World Architecture\nIntroduction to Contemporary Architecture" },
//     { "category": "Building Technology & Materials", "description": "Building Materials\nTechnical Design\nConcrete Structures\nBuilding Statics\nStrength of Materials and Steel Structures\nElectrical Installation (Illumination and Acoustics)\nIntroduction to Building Restoration" },
//     { "category": "Visual Arts Essentials", "description": "Applied Geometry\nPerspective Geometry\nMathematics & Statistics\nFundamentals of Visual Arts\nBasics of Architectural Design I\nBasics of Architectural Design II\nHuman, Nature, and Architecture\nFundamentals of Anatomical Planning" },
//     { "category": "Organizational Management", "description": "Human Resource Management\nOrganizational Management of Consultant Offices\nOperation Research and Quantitative Methods in Management\nMulti Criteria Decision Analysis Methods (TOPSIS, Vikor, Electre, AHP, etc.)" },
//     { "category": "Construction Management", "description": "Quantity Surveying and Estimating\nSite Management and Organization\nBuilding Site Report I\nBuilding Site Report II\nMaterial Management\nAdvanced Construction Site Management" },
//     { "category": "Contracts & Legal", "description": "Legal Issues and Contracts in Construction\nSuccessful strategies for Negotiation" },
//     { "category": "Green Building & Energy Modeling", "description": "Revit-BIM\nBuilding Energy Systems Design\nWhole Building Energy Modelling and Simulation\nCapstone: Greening Existing Budlings\nCapstone: New Building Energy System Design\nRegenerative Development\nGreen Building Contemporary Practice" },
//     { "category": "Leadership & Business", "description": "Organizational Leadership\nSustainability and Leadership\nAnalytics and Interpretation for Applied Science" },
//     { "category": "Business & Brand Marketing", "description": "Brands with Purpose\nBusiness Acumen for Technical Leaders\nBusiness Ethics Leadership" },
//     { "category": "Data Analysis & Visualization", "description": "Business Data Analytics (Tableau)\nData Visualization & Storytelling" }
// ];


var radarData = [
    {
        "category": "Project Management",
        "description": "Project Management Standards (PMBOK, PRINCE2, PMDC, and OPM3)\nSelected topics in contemporary project Management \nProject Financial Management (Budget and Feasibility Analysis) \nRisk Management (Risk Identification, Analysis, and Mitigation)\nProject Planning and Control (WBS, Gantt Chart, Monitoring, and MS Project)\nFinal Thesis: A Guideline on Utilizing Agile Practices in Construction Projects",
        "value1": 15,
        "value2": 80,
        "value3": 0,
    },
    {
        "category": "Organizational Management",
        "description": "Human Resource Management\nOrganizational Management of Consultant Offices\nOperation Research and Quantitative Methods in Management\nMulti Criteria Decision Analysis Methods (TOPSIS, Vikor, Electre, AHP, etc.)",
        "value1": 10,
        "value2": 40,
        "value3": 40,
    },
    {
        "category": "Architectural Design",
        "description": "Architectural Expression I\nArchitectural Expression II\nArchitectural Design I: Shopping Mall\nArchitectural Design II: Family House\nArchitectural Design III: Art Mausam\nArchitectural Design IV: Children Hospital\nArchitectural Design V: Climate-Friendly Residential Complex\nRural Architecture I\nRural Architecture II\nAnalysis of Urban Spaces\nFinal Design: Family Book Garden\nApplication of computer in Architecture\nIntroduction to the World Architecture\nIntroduction to Contemporary Architecture",
        "value1": 70,
        "value2": 0,
        "value3": 10,
    },
    {
        "category": "Building Technology & Materials",
        "description": "Building Materials\nTechnical Design\nConcrete Structures\nBuilding Statics\nStrength of Materials and Steel Structures\nElectrical Installation (Illumination and Acoustics)\nIntroduction to Building Restoration",
        "value1": 50,
        "value2": 10,
        "value3": 30,
    },
    {
        "category": "Visual Arts Essentials",
        "description": "Applied Geometry\nPerspective Geometry\nMathematics & Statistics\nFundamentals of Visual Arts\nBasics of Architectural Design I\nBasics of Architectural Design II\nHuman, Nature, and Architecture\nFundamentals of Anatomical Planning",
        "value1": 30,
        "value2": 0,
        "value3": 0,
    },

    {
        "category": "Construction Management",
        "description": "Quantity Surveying and Estimating\nSite Management and Organization\nBuilding Site Report I\nBuilding Site Report II\nMaterial Management\nAdvanced Construction Site Management",
        "value1": 20,
        "value2": 30,
        "value3": 0,
    },
    {
        "category": "Contracts & Legal",
        "description": "Legal Issues and Contracts in Construction\nSuccessful strategies for Negotiation",
        "value1": 10,
        "value2": 30,
        "value3": 10,
    },
    {
        "category": "Green Building & Energy Modeling",
        "description": "Revit-BIM\nBuilding Energy Systems Design\nWhole Building Energy Modelling and Simulation\nCapstone: Greening Existing Budlings\nCapstone: New Building Energy System Design\nRegenerative Development\nGreen Building Contemporary Practice",
        "value1": 20,
        "value2": 0,
        "value3": 50,
    },
    {
        "category": "Leadership & Team Building",
        "description": "Organizational Leadership\nSustainability and Leadership\nAnalytics and Interpretation for Applied Science",
        "value1": 0,
        "value2": 30,
        "value3": 40,
    },
    {
        "category": "Business & Brand Marketing",
        "description": "Brands with Purpose\nBusiness Acumen for Technical Leaders\nBusiness Ethics Leadership",
        "value1": 10,
        "value2": 20,
        "value3": 45,
    },
    {
        "category": "Data Analysis & Visualization",
        "description": "Business Data Analytics (Tableau)\nData Visualization & Storytelling",
        "value1": 0,
        "value2": 0,
        "value3": 40,
    }
];

xyData = [
    {
        "year": "2011-04",
        "value": 50,
        "program": "Microsoft Office Professional",
        "bullet": "Icons/MicrosoftOfficeProfessional.png",
    }, {
        "year": "2012-01",
        "value": 80,
        "program": "Autodesk Auto CAD",
        "bullet": "Icons/AutodeskAutoCAD.png",
    }, {
        "year": "2013-01",
        "value": 60,
        "program": "Microsoft Outlook",
        "bullet": "Icons/MicrosoftOutlook.png",
    }, {
        "year": "2014-01",
        "value": 90,
        "program": "Autodesk 3ds Max",
        "bullet": "Icons/Autodesk3dsMax.png",
    }, {
        "year": "2014-01",
        "value": 40,
        "program": "V-Ray Rendering",
        "bullet": "Icons/VRay.png",
    }, {
        "year": "2015-01",
        "value": 70,
        "program": "Adobe Photoshop CC",
        "bullet": "Icons/AdobePhotoshop.png",
    }, {
        "year": "2015-01",
        "value": 20,
        "program": "Adobe After Effects",
        "bullet": "Icons/AdobeAfterEffects.png",
    }, {
        "year": "2016-01",
        "value": 85,
        "program": "Prezi",
        "bullet": "Icons/Prezi.png",
    }, {
        "year": "2016-01",
        "value": 35,
        "program": "Microsoft Visio",
        "bullet": "Icons/MicrosoftVisio.png",
    }, {
        "year": "2017-01",
        "value": 75,
        "program": "Microsoft Project",
        "bullet": "Icons/MicrosoftProject.png",
    }, {
        "year": "2017-01",
        "value": 50,
        "program": "Autodesk Revit-Basics",
        "bullet": "Icons/AutodeskRevit.png",
    }, {
        "year": "2017-01",
        "value": 15,
        "program": "Mindjet Mind Manager",
        "bullet": "Icons/MindjetMindManager.png",
    }, {
        "year": "2018-01",
        "value": 90,
        "program": "Oracle Primavera P6",
        "bullet": "Icons/OraclePrimaveraP6.png",
    }, {
        "year": "2018-01",
        "value": 65,
        "program": "Adobe InDesign",
        "bullet": "Icons/AdobeInDesign.png",
    }, {
        "year": "2018-01",
        "value": 30,
        "program": "Microsoft SharePoint",
        "bullet": "Icons/MicrosoftSharePoint.png",
    }, {
        "year": "2019-01",
        "value": 55,
        "program": "Adobe Illustrator",
        "bullet": "Icons/AdobeIllustrator.png",
    }, {
        "year": "2020-01",
        "value": 90,
        "program": "IES Virtual Environment",
        "bullet": "Icons/IESVirtualEnvironment.png",
    }, {
        "year": "2020-01",
        "value": 78,
        "program": "eQUEST",
        "bullet": "Icons/eQUEST.png",
    }, {
        "year": "2020-01",
        "value": 65,
        "program": "Climate Consultant",
        "bullet": "Icons/ClimateConsultant.png",
    }, {
        "year": "2020-01",
        "value": 44,
        "program": "Athena Impact Estimator",
        "bullet": "Icons/AthenaImpactEstimator.png",
    }, {
        "year": "2020-01",
        "value": 25,
        "program": "Autodsk Revit-BIM",
        "bullet": "Icons/AutodeskRevit.png",
    }, {
        "year": "2020-01",
        "value": 10,
        "program": "Tableau Desktop",
        "bullet": "Icons/TableauSoftware.png",
    }, {
        "year": "2021-01",
        "value": 55,
        "program": "PMP Certification",
        "bullet": "Icons/PMPCertification.png",
    }, {
        "year": "2021-01",
        "value": 35,
        "program": "Python",
        "bullet": "Icons/Python.png",
    }, {
        "year": "2022-01",
        "value": 20,
        "program": "Bluebeam",
        "bullet": "Icons/Bluebeam.png",
    }, {
        "year": "2021-06",
        "value": 10,
        "program": "SiteDocs",
        "bullet": "Icons/SiteDocs.png",
    }, {
        "year": "2022-05",
        "value": 90,
        "program": "SiteMax",
        "bullet": "Icons/SiteMax.png",
    }, {
        "year": "2022-09",
        "value": 10,
        "program": "BuildingConnected",
        "bullet": "Icons/BuildingConnected.png",
    }, {
        "year": "2021-06",
        "value": 70,
        "program": "Corecon",
        "bullet": "Icons/Corecon.png",
    }, {
        "year": "2022-01",
        "value": 30,
        "program": "Jonas Premier",
        "bullet": "Icons/JonasPremier.png",
    }, {
        "year": "2021-08",
        "value": 80,
        "program": "Jotform",
        "bullet": "Icons/Jotform.png",
    }, {
        "year": "2023-01",
        "value": 50,
        "program": "Monday.com",
        "bullet": "Icons/Monday.png",
    }, {
        "year": "2022-09",
        "value": 65,
        "program": "Procore",
        "bullet": "Icons/Procore.png",
    }, {
        "year": "2022-03",
        "value": 40,
        "program": "Smartsheet",
        "bullet": "Icons/Smartsheet.png",
    }
];


am4core.useTheme(am4themes_animated);
am4core.useTheme(am4themes_amchartsdark);

// var colorSet = new am4core.ColorSet();

function createPieSeries(pieChart, data) {
    var series = pieChart.series.push(new am4charts.PieSeries());

    series.dataFields.value = "value";
    series.dataFields.category = "category";
    series.slices.template.stroke = am4core.color("#fff");
    series.slices.template.strokeWidth = 2;
    series.slices.template.strokeOpacity = 1;
    series.labels.template.disabled = true;
    series.ticks.template.disabled = true;

    // Disable on click
    series.slices.template.events.on("hit", function (event) {
        event.target.isActive = false;
    });

    // make all slices active
    series.slices.template.events.on("ready", function (event) {
        event.target.isActive = false;
    });
    // series.slices.template.states.getKey("active").properties.shiftRadius = 0.05;

    // Disable sliding out of slices
    // series.slices.template.states.getKey("hover").properties.shiftRadius = 0;
    series.slices.template.states.getKey("hover").properties.scale = 1.05;

    series.tooltip.label.maxWidth = 320;
    series.tooltip.label.wrap = true;
    series.tooltip.label.padding(20, 20, 20, 20);
    series.tooltip.getFillFromObject = false;
    series.tooltip.background.fill = am4core.color("#111");
    series.tooltip.label.fill = am4core.color("#f5f5f5");
    series.tooltip.background.stroke = am4core.color("Transparent");

    series.slices.template.tooltipText = "[bold]{category}:[/]\n{description}";
    // series.slices.template.strokeOpacity = 0;
    // series.slices.template.cornerRadius = 7;

    series.defaultState.transitionDuration = 500;
    series.sequencedInterpolation = true;
    series.alignLabels = false;

    series.data = data;

    return series
}

function createRadarSeries(radarChart, index) {
    var series = radarChart.series.push(new am4charts.RadarColumnSeries());
    // var series = radarChart.series.push(new am4charts.RadarSeries());

    series.stacked = true;

    series.dataFields.categoryX = "category";
    series.dataFields.valueY = "value" + (index + 1);
    // series.dataFields.valueY = "value";

    // fill lines
    series.strokeWidth = 3;
    series.fillOpacity = 0.1;
    series.fill = radarChart.colors.getIndex(index);

    // // Customize the appearance of data points (markers)
    // var bullet = series.bullets.push(new am4charts.CircleBullet());
    // bullet.circle.radius = 3;

    // // Add a hover effect to the data points
    // bullet.states.create("hover").properties.scale = 1.2;

    // series.tooltip.fontSize = 12;
    // series.tooltip.label.fill = am4core.color("#f5f5f5");
    // series.tooltip.background.fill = am4core.color("#111");
    // series.tooltip.background.stroke = am4core.color("Transparent");
    // series.tooltip.background.strokeWidth = 0;
    // series.tooltip.background.cornerRadius = 0;
    // series.tooltip.background.pointerLength = 0;
    // series.tooltip.dy = -10;
    // series.tooltip.label.padding(20, 20, 20, 20);
    // series.tooltip.label.maxWidth = 320;
    // series.tooltip.label.wrap = true;
    // series.tooltip.getFillFromObject = false;
    // series.tooltip.background.fill = am4core.color("#111");
    // series.tooltip.label.fill = am4core.color("#f5f5f5");
    // series.tooltip.background.stroke = am4core.color("Transparent");

    series.tooltip.disabled = true;
    series.rotation = -16;

    // series.sequencedInterpolation = true;
    // series.defaultState.transitionDuration = 10;
    series.sequencedInterpolation = true;
    // series.alignLabels = false;

    // series.data = data;

    return series
}

am4core.ready(function () {
    // var pieChart = am4core.create("multi-pie-chart", am4charts.PieChart);
    // pieChart.padding(0, 0, 50, 0);
    // pieChart.innerRadius = am4core.percent(40);
    // pieChart.x = am4core.percent(50);
    // pieChart.y = am4core.percent(50);
    // pieChart.width = am4core.percent(100);
    // pieChart.height = am4core.percent(100);
    // pieChart.horizontalCenter = "middle";
    // pieChart.verticalCenter = "middle";

    // var pieSeries1 = createPieSeries(pieChart, pieData1)
    // var pieSeries2 = createPieSeries(pieChart, pieData2)
    // var pieSeries3 = createPieSeries(pieChart, pieData3)

    // pieSeries1.radius = am4core.percent(20);
    // pieSeries2.radius = am4core.percent(55);
    // pieSeries3.radius = am4core.percent(100);

    // let legend = pieChart.createChild(am4charts.Legend);
    // legend.width = am4core.percent(100);
    // legend.contentAlign = "center";
    // legend.fontSize = 12;
    // legend.padding(0, 0, 0, 0);
    // legend.data = [
    //     { name: "Bachelor of Science\n[font-size: 12]Architectural Engineering[/]\n[font-size: 12 opacity: 0.5]Semnan University, Semnan, Iran[/]", fill: am4core.color("#222a3f") },
    //     { name: "Master of Science\n[font-size: 12]Project and Construction Management[/]\n[font-size: 12 opacity: 0.5]Shahid Beheshti University, Tehran, Iran[/]", fill: am4core.color("#222a3f") },
    //     { name: "Master of Engineering Leadership\n[font-size: 12]High-Performance Building[/]\n[font-size: 12 opacity: 0.5]University of British Columbia, Vancouver, BC, Canada[/]", fill: am4core.color("#222a3f") },
    // ];

    // // handle the legend item click
    // legend.itemContainers.template.events.on("hit", function (event) {
    //     var index = event.target.dataItem.index;
    //     if (!event.target.isActive) {
    //         pieChart.series.getIndex(index).hide();
    //     }
    //     else {
    //         pieChart.series.getIndex(index).show();
    //     }
    // })


    var radarChart = am4core.create("radar-chart", am4charts.RadarChart);
    radarChart.padding(0, 0, 50, 0);
    radarChart.x = am4core.percent(50);
    radarChart.y = am4core.percent(50);
    radarChart.width = am4core.percent(100);
    radarChart.height = am4core.percent(100);
    radarChart.horizontalCenter = "middle";
    radarChart.verticalCenter = "middle";

    radarChart.data = radarData;

    radarChart.colors.list = [
        am4core.color("#FF9E0D"), // Color for series 1
        am4core.color("#36A2EB"), // Color for series 2
        am4core.color("#FF6384")  // Color for series 3
    ];

    // radarChart.data = radarData;

    var radarCategoryAxis = radarChart.xAxes.push(new am4charts.CategoryAxis());
    radarCategoryAxis.dataFields.category = "category";
    radarCategoryAxis.alignLabels = false;

    radarCategoryAxis.renderer.labels.template.fontWeight = "bold";
    radarCategoryAxis.renderer.labels.template.textAlign = "middle";
    // radarCategoryAxis.renderer.labels.template.fontSize = 12;
    // radarCategoryAxis.renderer.labels.template.bent = true;
    // radarCategoryAxis.renderer.labels.template.padding(0, 0, 0, 0);
    // radarCategoryAxis.renderer.labels.template.maxWidth = 200;
    // radarCategoryAxis.renderer.labels.template.wrap = true;
    // radarCategoryAxis.renderer.labels.template.horizontalCenter = "middle";
    // radarCategoryAxis.renderer.labels.template.verticalCenter = "middle";

    radarCategoryAxis.events.on("sizechanged", function (event) {
        let axis = event.target;

        if (window.innerWidth < 760) {
            axis.renderer.labels.template.bent = true;
            axis.renderer.labels.template.fontSize = 6;
        } else {
            axis.renderer.labels.template.bent = false;
            axis.renderer.labels.template.wrap = true;
            axis.renderer.labels.template.fontSize = 12;
            let cellWidth = axis.pixelWidth / (axis.endIndex - axis.startIndex);
            axis.renderer.labels.template.maxWidth = cellWidth + 60;
            axis.invalidateLabels();
        }
        // arrangeLabel();

    });

    // radarCategoryAxis.inside = true;
    // radarCategoryAxis.renderer.labels.template.location = 0.5;
    // radarCategoryAxis.renderer.grid.template.strokeOpacity = 0.1;
    // radarCategoryAxis.renderer.axisFills.template.disabled = true;
    // radarCategoryAxis.renderer.axisAngle = 260;
    // radarCategoryAxis.renderer.labels.template.horizontalCenter = "right";
    // radarCategoryAxis.renderer.labels.template.verticalCenter = "middle";
    // radarCategoryAxis.renderer.labels.template.rotation = 270;
    // radarCategoryAxis.renderer.labels.template.adapter.add("rotation", function (rotation, target) {
    //     return radarCategoryAxis.position;
    // })



    // add categories to the axis
    // radarCategoryAxis.data = radarCategories;

    // radarCategoryAxis.renderer.labels.template.disabled = true;
    // categoryAxis.renderer.grid.template.location = 0;
    // categoryAxis.renderer.minGridDistance = 100;

    // radarCategoryAxis.tooltip.disabled = true;
    radarCategoryAxis.tooltipText = "[bold]{category}:[/]\n{description}";
    radarCategoryAxis.renderer.tooltipLocation = 0.01
    radarCategoryAxis.tooltip.fontSize = 15;

    // adjust line height
    radarCategoryAxis.tooltip.lineHeight = 1.5;

    // categoryAxis.tooltip.label.fill = am4core.color("#f5f5f5");
    radarCategoryAxis.tooltip.background.fill = am4core.color("#111");
    radarCategoryAxis.tooltip.background.strokeWidth = 0;
    radarCategoryAxis.tooltip.background.cornerRadius = 10;
    radarCategoryAxis.tooltip.background.pointerLength = 0;
    // radarCategoryAxis.tooltip.dy = -10;
    radarCategoryAxis.tooltip.label.padding(20, 20, 20, 20);
    radarCategoryAxis.tooltip.label.maxWidth = 350;
    radarCategoryAxis.tooltip.label.wrap = true;
    radarCategoryAxis.tooltip.pointerOrientation = "up";

    // on label hover
    radarCategoryAxis.renderer.labels.template.events.on("over", function (event) {
        // set tooltip content and location
        radarCategoryAxis.tooltipDataItem = event.target.dataItem;
        radarCategoryAxis.tooltipX = event.target.pixelX;
        radarCategoryAxis.tooltipY = event.target.pixelY + 10;
    })


    var radarValueAxis = radarChart.yAxes.push(new am4charts.ValueAxis());
    radarValueAxis.renderer.labels.template.disabled = true;
    // valueAxis.renderer.grid.template.disabled = true;
    // valueAxis.renderer.axisFills.template.fill = radarChart.colors.getIndex(2);
    // valueAxis.renderer.axisFills.template.fillOpacity = 0.05;
    // valueAxis.tooltip.disabled = true;
    radarValueAxis.min = 0;
    radarValueAxis.max = 100;

    // Customize legend
    radarChart.legend = new am4charts.Legend();
    radarChart.legend.labels.template.fontSize = 12;

    // remove categories on click
    // radarChart.legend.itemContainers.template.events.on("hit", function (event) {
    //     var targetSeries = event.target.dataItem.dataContext;
    //     // console.log(series.hidden)
    //     // if (series.hidden) {
    //     //     // The series was hidden
    //     //     console.log("Series hidden: " + series.title);
    //     //     // You can perform additional actions here
    //     // } else {
    //     //     // The series was shown
    //     //     console.log("Series shown: " + series.title);
    //     //     // You can perform additional actions here
    //     // }

    //     // remove category if no active series have a value bigger than 0
    //     // radarCategoryAxis.data = radarCategoryData.filter(function (item) {
    //     //     var found = false;
    //     //     radarChart.series.each(function (series) {
    //     //         if (series !== targetSeries) {
    //     //             console.log(series.data)
    //     //             series.data.forEach(function (dataItem) {
    //     //                 console.log(dataItem)
    //     //                 if (dataItem.category == item.category && dataItem.value > 0) {
    //     //                     found = true;
    //     //                 }
    //     //             })
    //     //         }
    //     //     })
    //     //     return found;
    //     // });
    // })

    var radarSeries1 = createRadarSeries(radarChart, 0)
    var radarSeries2 = createRadarSeries(radarChart, 1)
    var radarSeries3 = createRadarSeries(radarChart, 2)
    radarSeries1.name = "[bold]Bachelor of Science[/]\n[font-size: 12]Architectural Engineering[/]\n[font-size: 12 opacity: 0.5]Semnan University, Semnan, Iran[/]";
    radarSeries2.name = "[bold]Master of Science[/]\n[font-size: 12]Project Management[/]\n[font-size: 12 opacity: 0.5]Shahid Beheshti University, Tehran, Iran[/]";
    radarSeries3.name = "[bold]Master of Engineering Leadership[/]\n[font-size: 12]High-Performance Building[/]\n[font-size: 12 opacity: 0.5]University of British Columbia, Vancouver, BC, Canada[/]";

    // cursor
    radarChart.cursor = new am4charts.RadarCursor();
    radarChart.cursor.lineY.disabled = true;
    // radarChart.cursor.lineX.disabled = true;
    radarChart.cursor.behavior = "none";


    // rotate series by 90 degrees
    // radarChart.innerRadius = am4core.percent(20);



    var xyChart = am4core.create("XY-chart", am4charts.XYChart);
    xyChart.padding(30, 0, 0, 0)

    // Add data
    xyChart.data = xyData;

    // Set input format for the dates
    xyChart.dateFormatter.inputDateFormat = "yyyy-MM";

    // Create axes
    var xyDateAxis = xyChart.xAxes.push(new am4charts.DateAxis());
    xyDateAxis.baseInterval = {
        count: 1,
        timeUnit: "month"
    }
    xyDateAxis.renderer.grid.template.location = 0;
    xyDateAxis.renderer.minGridDistance = 90;
    xyDateAxis.renderer.opposite = true;
    xyDateAxis.min = new Date(2011, 0, 0, 0, 0, 0, 0).getTime();
    xyDateAxis.max = new Date(2024, 0, 0, 0, 0, 0, 0).getTime();
    xyDateAxis.strictMinMax = true;

    var xyValueAxis = xyChart.yAxes.push(new am4charts.ValueAxis());
    xyValueAxis.renderer.labels.template.disabled = true;
    xyValueAxis.min = 0;
    xyValueAxis.max = 100;

    // Create series
    var xySeries = xyChart.series.push(new am4charts.LineSeries());
    xySeries.dataFields.valueY = "value";
    xySeries.dataFields.dateX = "year";
    // series.tooltipText = "{tooltip}"
    xySeries.strokeWidth = 2;
    xySeries.minBulletDistance = 15;
    xySeries.strokeOpacity = 0;

    // Drop-shaped tooltips
    xySeries.tooltip.background.cornerRadius = 20;
    xySeries.tooltip.background.strokeOpacity = 0;
    xySeries.tooltip.pointerOrientation = "vertical";
    xySeries.tooltip.label.minWidth = 40;
    xySeries.tooltip.label.minHeight = 40;
    xySeries.tooltip.label.textAlign = "middle";
    xySeries.tooltip.label.textValign = "middle";

    var xyBullet = xySeries.bullets.push(new am4charts.Bullet());
    xyBullet.width = 400;
    // bullet.align = "center";

    let xyImage = xyBullet.createChild(am4core.Image);
    xyImage.propertyFields.href = "bullet";
    xyImage.width = 30;
    xyImage.height = 30;
    xyImage.horizontalCenter = "middle";
    xyImage.verticalCenter = "middle";

    let xyBulletLabel = xyBullet.createChild(am4core.Label);
    xyBulletLabel.text = "{program}";
    xyBulletLabel.fontSize = 12;
    xyBulletLabel.strokeWidth = 0;
    xyBulletLabel.fontWeight = 400;
    xyBulletLabel.fill = am4core.color("#fff");

    xyBulletLabel.wrap = true;
    xyBulletLabel.maxWidth = 120;
    xyBulletLabel.dx = 20;
    xyBulletLabel.horizontalCenter = "left";
    xyBulletLabel.verticalCenter = "middle";

    var xyBullethover = xyBullet.states.create("hover");
    xyBullethover.properties.scale = 1.1;

    xyChart.cursor = new am4charts.XYCursor();
    xyChart.cursor.behavior = "none";
    xyChart.cursor.lineY.disabled = true;
});



function currentDiv(slideIndex, thumbnail) {
    let thumbnail_navigator = thumbnail.parentNode
    let last_slide_index = Array.prototype.indexOf.call(thumbnail_navigator.children, thumbnail_navigator.querySelector(".active"));

    if (slideIndex == last_slide_index) return 1
    // if (slideIndex > slides.length) {slideIndex = 0}
    // if (slideIndex < 0) {slideIndex = slides.length}

    let thumbnails = thumbnail_navigator.children
    let slides = thumbnail_navigator.parentNode.children[0].children;

    slides[last_slide_index].classList.toggle("active");
    slides[slideIndex].classList.toggle("active");

    if (screen.width > 1000) {
        thumbnail_navigator.scrollTop = (thumbnail.offsetHeight + Number(getComputedStyle(thumbnail_navigator).gridRowGap.slice(0, -2))) * (slideIndex + 0.5) - thumbnail_navigator.offsetHeight / 2;
    } else {
        thumbnail_navigator.scrollLeft = thumbnail.offsetWidth * (slideIndex + 0.5) - thumbnail_navigator.offsetWidth / 2;
    }

    thumbnails[last_slide_index].classList.toggle("active");
    thumbnails[slideIndex].classList.toggle("active");
}

Array.from(document.getElementsByClassName("thumbnail")).forEach(thumbnail => {
    let index = Array.prototype.indexOf.call(thumbnail.parentNode.children, thumbnail);
    thumbnail.addEventListener('click', function () { currentDiv(index, thumbnail) }, false);
});


document.onreadystatechange = () => {
    if (document.readyState === 'complete') {
        // fill the software showcase
        let software_showcase = document.getElementById("software-showcase");
        let software_showcase_content = "";
        xyData.forEach((item, index) => {
            software_showcase_content += `
        <div class="software-showcase-item">
            <div class="software-showcase-item-image">
                <img src="${item.bullet}" alt="${item.program}">
            </div>
            <div class="software-showcase-item-text">
                <p>${item.program}</p>
            </div>
        </div>
        `;
        });
        software_showcase.innerHTML = software_showcase_content;

        function adjustDetails() {
            let details = document.querySelectorAll("details");
            for (let i = 0; i < details.length; i++)
                if (isDesktop && details[i].id != "portfolio") {
                    details[i].open = true;
                    details[i].classList.add("disabled");
                } else {
                    details[i].open = false;
                    details[i].classList.remove("disabled");
                }
        }

        // on resize
        var isDesktop = window.innerWidth > 700;
        window.addEventListener('resize', function () {
            let isNowDesktop = window.innerWidth > 700;
            if (isDesktop != isNowDesktop) {
                isDesktop = isNowDesktop;
                adjustDetails();
            }
        });
        adjustDetails();

        document.querySelector(".pre-loading").style.opacity = "0";
        document.querySelector(".pre-loading").style.visibility = "hidden";
    }
};